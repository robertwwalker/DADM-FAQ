{
  "hash": "d5e9c831cf4a4d980bb0e3ee391b4f5c",
  "result": {
    "markdown": "---\ntitle: Visualizing Two Quantitative Variables\nauthor: Robert W. Walker\ndate: '2023-01-25'\nslug: visualize-two-qualities\ncategories:\n  - R\n  - dataviz\ntags:\n  - plot\nsubtitle: ''\nsummary: ''\nlastmod: '2023-01-25T08:04:06-07:00'\ntoc: true\nimage: img/preview.png\n---\n\n\n\n\n# Bonds\n\nA dataset for illustrating the various available visualizations needs a certain degree of richness with manageable size.  The dataset on *Bonds* contains three categorical and a few quantitative indicators sufficient to show what we might wish.\n\n## Loading the Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nBonds <- read.csv(url(\"https://raw.githubusercontent.com/robertwwalker/DADMStuff/master/BondFunds.csv\"))\n```\n:::\n\n\n## A Summary\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(skimr)\nBonds %>%\n    skim()\n```\n\n::: {.cell-output-display}\nTable: Data summary\n\n|                         |           |\n|:------------------------|:----------|\n|Name                     |Piped data |\n|Number of rows           |184        |\n|Number of columns        |9          |\n|_______________________  |           |\n|Column type frequency:   |           |\n|character                |4          |\n|numeric                  |5          |\n|________________________ |           |\n|Group variables          |None       |\n\n\n**Variable type: character**\n\n|skim_variable | n_missing| complete_rate| min| max| empty| n_unique| whitespace|\n|:-------------|---------:|-------------:|---:|---:|-----:|--------:|----------:|\n|Fund.Number   |         0|             1|   4|   6|     0|      184|          0|\n|Type          |         0|             1|  20|  23|     0|        2|          0|\n|Fees          |         0|             1|   2|   3|     0|        2|          0|\n|Risk          |         0|             1|   7|  13|     0|        3|          0|\n\n\n**Variable type: numeric**\n\n|skim_variable  | n_missing| complete_rate|   mean|      sd|     p0|    p25|   p50|    p75|     p100|hist  |\n|:--------------|---------:|-------------:|------:|-------:|------:|------:|-----:|------:|--------:|:-----|\n|Assets         |         0|             1| 910.65| 2253.27|  12.40| 113.72| 268.4| 621.95| 18603.50|▇▁▁▁▁ |\n|Expense.Ratio  |         0|             1|   0.71|    0.26|   0.12|   0.53|   0.7|   0.90|     1.94|▂▇▅▁▁ |\n|Return.2009    |         0|             1|   7.16|    6.09|  -8.80|   3.48|   6.4|  10.72|    32.00|▁▇▅▁▁ |\n|X3.Year.Return |         0|             1|   4.66|    2.52| -13.80|   4.05|   5.1|   6.10|     9.40|▁▁▁▅▇ |\n|X5.Year.Return |         0|             1|   3.99|    1.49|  -7.30|   3.60|   4.3|   4.90|     6.80|▁▁▁▅▇ |\n:::\n:::\n\n\nMost data types are represented.  There is no time variable so dates and the visualizations that go with time series are omitted.\n\n# Data Visualization\n\nThe primary visualization that we might use for a combination of two quantities is the scatterplot: `geom_point()`. I will also make use of `facet`.  Let me work with Assets and Returns, then with Risk.\n\n## `geom_point()`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nBonds %>%\n    ggplot() + aes(x = Assets, y = Return.2009) + geom_point()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n### A little better: theming\n\nI do not like the default theme.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nBonds %>%\n    ggplot() + aes(x = Assets, y = Return.2009) + geom_point() + theme_minimal()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n## Fixing Overplotting\n\n`ggplot` has an alternative geometry known as `geom_jitter()` that jitters -- adds arbitrarily small amounts to the x and y coordinates.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nBonds %>%\n    ggplot() + aes(x = Assets, y = Return.2009) + geom_jitter() + theme_minimal()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\nThe two controls for the jitter are width:\n\n![width](./img/Screenshot 2023-01-25 at 9.11.14 AM.png)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nBonds %>%\n    ggplot() + aes(x = Assets, y = Return.2009) + geom_jitter(width = 0.25) + theme_minimal()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nBonds %>%\n    ggplot() + aes(x = Assets, y = Return.2009) + geom_jitter(height = 0.25) + theme_minimal()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\nand the height\n\n![height](./img/Screenshot 2023-01-25 at 9.11.25 AM.png)\n## Some other elements\n\nSince I am going to work with Risk, let's try that in color.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nBonds %>%\n    ggplot() + aes(x = Assets, y = Return.2009, color = Risk) + geom_point() + theme_minimal()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n## A bubble plot?\n\nNow I will put Risk on `x` and Returns on `y` with the size of the bubble determined by Assets.  First, without jitter.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nBonds %>%\n    ggplot() + aes(x = Risk, y = Return.2009, size = Assets, color = Risk) + geom_point() +\n    theme_minimal() + guides(color = \"none\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nBonds %>%\n    ggplot() + aes(x = Risk, y = Return.2009, color = Risk, size = Assets) + geom_jitter(width = 0.45) +\n    theme_minimal() + guides(color = \"none\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n## Deploying Facets\n\n\n::: {.cell}\n\n```{.r .cell-code}\nBonds %>%\n    ggplot() + aes(x = Assets, y = Return.2009, color = Risk, facet = Risk) + geom_point() +\n    theme_minimal() + guides(color = \"none\") + facet_wrap(~Risk)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}